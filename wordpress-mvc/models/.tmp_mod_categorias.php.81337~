<?php
 class Mod_categorias extends Model{
    function __construct(){
    	parent::__construct();
    }
    function crear(){
    	$name = htmlentities($_POST['name']);
		$sql="
			INSERT INTO `{$this->prefix}cm_categorias` (
				`cm_cat_nombre` ,
				`cm_cat_post`
			)
			VALUES (
			 '$name', NULL
			);
		";
		if($name) parent::query($sql);
    }
    function modifica(){
    	$id = intval($_POST['id']);
    	$name = htmlentities($_POST['name_'.$id]);
		$sql="
			UPDATE `{$this->prefix}cm_categorias` 
			SET `cm_cat_nombre` = '$name' 
			WHERE `{$this->prefix}cm_categorias`.`cm_cat_id` =$id ;	
		";
		parent::query($sql);
    }
	
    function listaCat(){
    	$id = intval($_POST['id']);
    	$name = htmlentities($_POST['name']);
		$sql="
			SELECT `cm_cat_nombre`, `cm_cat_id`
			FROM `{$this->prefix}cm_categorias`
			ORDER BY `cm_cat_nombre`
			LIMIT 0 , 40
		";
		return parent::results($sql);
    }
 }
?>